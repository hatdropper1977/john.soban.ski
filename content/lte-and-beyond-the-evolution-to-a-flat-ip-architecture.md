Title: LTE and Beyond:  The Evolution from Heirarchical to Flat IP Mobile Network Architectures
Date: 2018-04-19 01:12
Author: john-sobanski
Category: IETF
Tags: LTE, 3GPP, SD-RAN
Slug: lte-and-beyond-the-evolution-to-a-flat-ip-architecture
Status: published

I wrote this white paper a while back.  This paper discusses the [evolution](https://en.wikipedia.org/wiki/System_Architecture_Evolution) from [hierarchical](https://ieeexplore.ieee.org/abstract/document/760423/) to [Flat IP](https://en.wikipedia.org/wiki/Flat_IP) Architectures for mobile networks.  This information may be of interest to mobile network architects, especially in light of the emergence of [Software Defined Radio Access Networks](https://networks.inf.ed.ac.uk/flexran/) (SD-RAN).

# Introduction
Consumption of IP data by mobile devices continues to increase.  Users “access from mobile networks the same variety of broadband services experienced on fixed networks... a high number of mobile users will consume these services; causing a high traffic volume and scalability issues [[Daoud](https://ieeexplore.ieee.org/document/5450117/) 793].”  “Based on the current trends in telecommunications, vendors prognosticate that mobile networks will suffer an immense traffic explosion in the packet switched domain up to year 2020.  In order to accommodate the future Internet to the anticipated traffic demands, technologies applied in the radio access and core networks must become scalable to advanced future use cases [[Bokor](https://link.springer.com/chapter/10.1007/978-3-642-20898-0_3) 1].”  [3rd Generation Partnership Project](https://en.wikipedia.org/wiki/3GPP) (3GPP) develops new radio access and user element technologies to accommodate the growth, but "...perhaps most important change in network technology is the development of IP technology in core networks.  Circuit and packet switched networks are consolidating to flat IP-based architectures to support multiple technologies [[Sarin](https://ieeexplore.ieee.org/document/4342843/) 12].”

This paper briefly discusses the components of 3GPP evolution to include [Long Term Evolution](https://en.wikipedia.org/wiki/LTE_(telecommunication)) (LTE).  This paper focuses on the benefits of a flat Internet Protocol (IP) architecture, and contrasts the flat architecture to the traditional [hierarchical and centralized](https://en.wikipedia.org/wiki/Hierarchical_network_model) (which I refer to as H/C) approach, with a focus on scalability.  This paper also looks at the evolution of [mobility management](https://en.wikipedia.org/wiki/Mobility_management) (MM) in relation to flat and H/C architecture scalability, and discusses MM approaches to include Dynamic Mobility Management (DMM).

## 3GPP R8 EPC
3GPP release eight (8) introduces an evolved [Radio Access Network](https://en.wikipedia.org/wiki/Radio_access_network) (RAN) called Long Term Evolution (LTE), which contains the Evolved Packet System (EPS) that includes the [Service Architecture Evolution](https://en.wikipedia.org/wiki/System_Architecture_Evolution) (SAE), Evolved Packet Core (EPC) and the [Evolved Universal Terrestrial Radio Access Network](https://en.wikipedia.org/wiki/E-UTRA) (E-UTRAN).  [[Bogineni](https://ieeexplore.ieee.org/document/4785378/) 40].  The SAE provides an IP-based packet core network that enables users to access both the operator's 3GPP IP services and access network agnostic (3GPP and non-3GPP) services, which ensures mobility between these access networks.  The SAE architecture introduces three new entities, the Packet Data Network Gateway (P-GW), the Serving Gateway (S-GW) and the Mobility Management Entity (MME).  3GPP designates the first IP router for all users the P-GW.  The P-GW runs anchor-based Mobility Management (MM) protocols (which we discuss in this paper) and manages the mobility of users between both 3GPP access systems and non-3GPP access systems.  It provides services similar to Gateway GPRS Support Node (GGSN) for the older generation [General Packet Radio Service](https://en.wikipedia.org/wiki/General_Packet_Radio_Service) (GPRS).  The S-GW provides MM for users between 3GPP access systems such as UTRAN and LTE.  The S-GW provides functions equivalent to the [Serving GPRS Support Node](https://de.wikipedia.org/wiki/GPRS_Support_Node) (SGSN) data (or user) forwarding plane functions.  The MME performs SGSN control (or signaling) plane operations.  The LTE, a flat access Network (NW) consists only of one node type, the [eNodeB](https://en.wikipedia.org/wiki/EnodeB).  The LTE Base Station (BS) contains all the radio intelligence. [[Daoud](https://ieeexplore.ieee.org/document/5450117/) 793]

The [E-UTRAN](https://en.wikipedia.org/wiki/E-UTRA), a new radio system that 3GPP bases on [Orthogonal Frequency Division Multiplexing](https://en.wikipedia.org/wiki/Orthogonal_frequency-division_multiplexing) (OFDM), increases mobile terminal data rates, lower E2E latency for real time (RT) communication and reduces set-up times for new connections.  The EPC supports mobile services for both 3GPP defined RAN and non-3GPP defined RAN such as [Wireless Local Area Network](https://en.wikipedia.org/wiki/Wireless_LAN) (WLAN), [Worldwide interoperability Microwave Access](https://en.wikipedia.org/wiki/WiMAX) (WiMAX) and [Code division multiple access](https://en.wikipedia.org/wiki/Code-division_multiple_access) (CDMA) 2000.  The EPC enables MM service continuity, which we discuss in this paper. [ [Ali](https://ieeexplore.ieee.org/document/4785381/) 58]

## Packet Switch Evolution Table
After a brief discussion of the LTE components, we now focus the rest of the paper on the packet switch entities.  This paper concentrates on Flat vs. H/C architectures and their approaches to MM.  For space considerations, I’ve synthesized the following table from the text of [[Bokor](https://link.springer.com/chapter/10.1007/978-3-642-20898-0_3) 41].  The table illustrates the evolution of packet switch (PS) NW in mobile communication systems.

![Packet Switch Evolution Table]({filename}/images/Lte_And_Beyond_The_Evolution_To_A_Flat_Ip_Architecture/01_packet_switch_evolution_table.png)
 
## Mobile System Scalability Issues
The evolution of mobile communication networks includes the move to Flat architectures.  We consider H/C architectures the opposite of Flat architectures.  H/C system solutions use central controllers (CC) and base stations (BS).  H/C split access-specific functionality over multiple network elements; for example, the CC must operate in unison with BS.  The dialog between the CC and BS requires a new NW protocol, and introduces the typical NW headaches (loss, latency, jitter).  In addition, engineers must define, maintain & test the interfaces (I/F) before deployment.  The CC and BS require failure recovery for lost, duplicated, delayed, proprietary messages, which adds complexity to the system in the form of redundant I/F, longer transmission times, higher development costs and higher [OPEX](https://en.wikipedia.org/wiki/Operating_expense).  We can flatten the H/C system and remove the specialized backhaul protocol, and replace the protocol with a simple IP-based network. [[Bosch](https://ieeexplore.ieee.org/document/4224951/) 3865]

H/C approaches cause control plane scalability issues.  Separate service and access layers introduce additional complexity for session establishment procedures.  For interaction between these layers during session establishment, the system requires special schemes, such as the policy and charging control (PCC) we discuss in the IP Multimedia Subsystem (IMS) section below.  PCC must ensure the bearer on the access network matches service layer resources and operator policy and user subscription permissions.  A large number of standardized interfaces mean the service & access layer balancing could cause issues in the control plane.  The control plane suffers scalability and [QoS](https://en.wikipedia.org/wiki/Quality_of_service) issues. [[Bokor](https://link.springer.com/chapter/10.1007/978-3-642-20898-0_3) 45]

Let us look at IMS in detail, and how the Session Initiation Protocol (SIP) approach to signaling may lead to bottlenecks.  3GPP defines IP Multimedia Subsystem (IMS) as a service framework that enables fixed and mobile network operators to provide the adequate QoS for transported services and perform a service based differentiated charging. [[Daoud](https://ieeexplore.ieee.org/document/5450117/) 794].  I’ve created the following table that states the various IMS components, based on the text of [[Daoud](https://ieeexplore.ieee.org/document/5450117/) 794]

![IMS SIP Based Network Components]({filename}/images/Lte_And_Beyond_The_Evolution_To_A_Flat_Ip_Architecture/02_iims_sip_based_nw_components.png)
 
The takeaway of Doaud is that IMS and PCC architectures maintain contexts in such a way that increases scalability risks.  When we integrate the PCC architecture with SAE the mobility protocol between the P-GW and the access gateways (e.g. PMIP) does not act as a bearer establishment protocol.  The MM protocol requires new interfaces.  3GPP adds Interfaces between the PCRF and these gateways, and more interfaces (or more complexity in any form) increase scalability risks, as we will discuss later in this paper.  [[Daoud](https://ieeexplore.ieee.org/document/5450117/) 795].  Put succinctly, Daoud writes “IMS, the service control layer on top of fixed and mobile networks, is also centralized and is subject to scalability issues” which correlate to the location of the first IP router seen by the Mobile Node (MN) and the “Number of user related contexts each IMS and mobile network node maintains [[Daoud](https://ieeexplore.ieee.org/document/5450117/) 793].”

In addition to inter-entity, inter-layer protocols, key single nodes-in-the-loop prevent scalability.  Anchor points illustrate the concept of key single nodes in mobile system.  Anchor points play a major role in both Flat and H/C architectures, in terms of Mobility Management (MM).  For anchor points, 3GPP UMTS uses GGSN, SAE uses P-GW and WiMAX uses CSN.  Anchor points allocate IP addresses and establish tunnels.  For each IP address and tunnel, the Anchor Points maintain “contexts” that contain binding ID, tunnel ID and QoS information.  The anchor points update contexts and use them to filter and route user traffic to and from end terminals.  Network elements (incl. anchor points) maintain finite simultaneous active contexts.  To increase the number of maintained simultaneous active contexts, operators must install new equipment or upgrade old equipment with more capacity.  [[Bokor](https://link.springer.com/chapter/10.1007/978-3-642-20898-0_3) 45].  Mobile network engineers investigate MM alternatives to anchor points that maintain contexts, in order to prevent [CAPEX](https://en.wikipedia.org/wiki/Capital_expenditure).  The H/C approach to Anchor Points, and at a higher level, MM requires a single upstream node to maintain state of nodes within their responsibility.  The state and context maintenance leads to bottlenecks, since any single entity has finite physical resources.  We describe a H/C architecture in the context of GPRS.  The RNC, the intelligent part of UTRAN, performs data ciphering, data compression and radio resource allocation.  The GPRS SGSN performs user authentication, stores ciphering keys for each user and forwards data to the MN In Accordance With (IAW) bearer establishment routing & Quality of Service (QoS) info.  The number of users and/or traffic rate, therefore, impacts the SGSN that maintains a per-user context and lies on the forwarding data path.  3GPP reduces this scalability issue through Direct Tunnel Encryption (DTE).  With DTE, data on the forwarding plane does not need to pass through the SGSN.  DTE directly tunnels data from the GGSN to the RNC. [[Daoud](https://ieeexplore.ieee.org/document/5450117/) 793].

Single nodes with critical functions for the mobile system become potential bottlenecks.  The key nodes either maintain contexts or lie on the data path, which makes them potential bottlenecks.  The authors do not favor the H/C approach.  Bokor writes "mobile architectures under standardization (e.g., 3GPP, 3GPP2, WiMAX Forum) follow a centralized approach which cannot scale well to the changing traffic conditions" [[Bokor](https://link.springer.com/chapter/10.1007/978-3-642-20898-0_3) 38].  Dauod writes "Due to their centralized design, current mobile network architectures as well as IMS layer will not be able to handle the increasing number of mobile users consuming high bitrate services" [[Daoud](https://ieeexplore.ieee.org/document/5450117/) 793].  Bokor writes of the issues facing LTE, which takes a “flatter” approach than older generations.  The eNodeB allows an almost complete distribution of radio and handover control mechanisms and direct logical interfaces for inter-eNodeB communications.  LTE allows temporary traffic forwarding between neighboring eNodeB during handover events, which provides intra-domain mobility.  Traffic forwarding and inter-gateway mobility operations, unfortunately, remain centralized thanks to the fact that the complex interactions of the S-GW, PDN-GW, Local Mobility Anchor and Home Agent (HA) maintain and switch a centralized, hierarchical and overlapping system of tunnels towards mobile nodes.  Bokor writes that LIPTO & SIPA extension offloads (described in my “Evolution of Packet Switch” table above) cannot completely solve this issue, since mobility management mechanisms in current wireless and mobile networks anchor the user traffic relatively far from users’ location.  The system manifests a centralized, un-scalable data plane and a control plane with non-optimal routes, overhead, high end-to-end (E2E) packet delay (even in case of motionless users), centralized context maintenance and single point of failures. [[Bokor](https://link.springer.com/chapter/10.1007/978-3-642-20898-0_3) 43].  Daoud writes , “despite the [Flat Arch] effort, scalability issues are still not entirely solved since these architectures remain centralized [[Daoud](https://ieeexplore.ieee.org/document/5450117/) 793].” Daoud writes “the flattening approach appears to be a solution for the expected scalability risks; however the way it is applied for LTE/ SAE and UMTS (HSPA+) does not solve all scalability issues. Even if these architectures remove some of the intermediate nodes, the first IP router is still centralized and manages a high number of users [[Daoud](https://ieeexplore.ieee.org/document/5450117/) 794].”

## Reasons for Hierarchical and Centralized (H/C) Approach
H/C approaches contain complex inter-entity communications and protocols, as well as potential single node bottlenecks.  Why do we have H/C architectures?  Economic factors initially drove the development of the H/C architecture.  Systems required expensive, dedicated hardware to vocode and compress voice transmissions.  System architects placed these devices in central locations, to share the expense over a large number of users.  The compression allowed engineers to send fewer bits over the backhaul connecting the core network to the base.  Second to the economics factor, H/C provided redundancy.  For CDMA systems, hierarchy performs diversity TX and RX.  A central anchor prepares downlink data and distributes to a number of base stations via simultaneous TX over the wireless link.  The mobile combines info from multiple legs, and decodes the redundant info that combats fast fading radio channels.  On the uplink, the central controller (e.g. UMTS RNC) selects best voice uplink packet before TX the received packets to vocoders. [[Bosch](https://ieeexplore.ieee.org/document/4224951/) 3864].  In spite of this, we will discuss how “the economic reasons for designing cellular systems in a hierarchical manner have disappeared: in fact, hierarchical architectures hinder future efficient deployments [[Bosch](https://ieeexplore.ieee.org/document/4224951/) 3864].”

## Flat Architectures
A flat architecture integrates BS Layer 2 and Layer 3 functions.  To review, Layer 1 provides TX and RX of data over the wireless channel.  Layer 2 performs link-layer fragmentation/ reassembly and [Error Detection and Correction](https://en.wikipedia.org/wiki/Error_detection_and_correction) (EDAC).  Layer 3 provides IP-Layer services and enables wireless voice circuits. [[Bosch](https://ieeexplore.ieee.org/document/4224951/) 3864].  For example, LTE provides a Flat Architecture.  LTE "incorporat[es] radio network controller (RNC) functionality inside eNodeB, handovers [are] negotiated and managed directly between eNodeBs, which… mimic those currently employed in 3G UTRAN networks [[Bogineni](https://ieeexplore.ieee.org/document/4785378/) 41].”

Why do we use flat architectures?  Flat architectures enable high scalability because (in their desired end state) they can remove centralized anchors (main performance bottlenecks) and forward traffic in a distributed fashion.  They enable broadband access evolution.  Without central node resource or hierarchical concerns systems can use range extension of RANs through unmanaged micro-, pico- and femtocells.  With direct connect integrated and IP-enabled radio base station (BS) to the IP core infrastructure, the system enables easy interoperation between heterogeneous wireless technologies which facilitates infrastructure sharing for the operators.  Flat eliminates access technology specific centralized components.  A “single box” (such as eNodeB) removes the insertion and queue delays of the hierarchical/ multi-element access and core NW approach.  A single box approach removes feedback time of inter-module COMM (i.e. handle signaling locally) and enables cross-layer optimization schemes (improves performance).  In addition, general-purpose IP equipments drive economy of scale.  Also, fewer integrated components drive reduced OPEX since removing single points of failure results in greater reliability.  Eliminating inter-layer complexity reduces suboptimal routing situations and realizes advanced resource efficiency. [[Bokor](https://link.springer.com/chapter/10.1007/978-3-642-20898-0_3) 46].  I’ve condensed the text of [[Bosch](https://ieeexplore.ieee.org/document/4224951/) 3864] into the table below.

![Reasons for a flat architecture]({filename}/images/Lte_And_Beyond_The_Evolution_To_A_Flat_Ip_Architecture/03_reasons_for_flat_architecture.png)

Mobile engineers work towards an ultra flat architecture (UFA).  The UFA contains one node, a  base station (BS), which executes both data forwarding plane and control plane functions and includes the IMS.  The UFA distributes IMS and mobile NW functions into the BS.  The establishment and MM procedures integrate QoS and controlled via the NW. [[Daoud](https://ieeexplore.ieee.org/document/5450117/) 797].

## System Mobility
Now that we have discussed the differences between H/C and Flat architecture approaches, we now look at one of the most important functions of mobile packet switched architectures, mobility management (MM).  Older MM solutions rely on H/C architectures since they employ anchor nodes for mobility signaling and user traffic forwarding.  H/C MM plumbs explicit routes (or tunnels) through the hierarchy of the system to one or more base stations that maintain wireless connections with a mobile.  In the UMTS packet service, for example, the GGSN forwards the IP packets to the SGSN which then tunnels the data to the RNC which processes the IP packet into transport blocks and forwards those transport blocks over ATM to the Node Bs. [[Bosch](https://ieeexplore.ieee.org/document/4224951/) 3865].

Consider a mobile in a paging area (a set of BS).  In the H/C a central node (e.g. RNC, MSC or SGSN) maintains available mobiles for paging areas.  If the central node receives an incoming call for a dormant mobile phone it initiates access-specific paging functions to the paging area.  All the BS in the paging area transmit a page over the paging channel in their cell to find the mobile.  The mobile receives the page, wakes up and re-establishes contact.  The central node then delivers the IP packets. [[Bosch](https://ieeexplore.ieee.org/document/4224951/) 3865].

Flat systems, however, do not have a central anchor for call or IP packet receipt.  A BS assumes the role of the central node (usually the mobile's BS of last attachment becomes anchor point).  An incoming call or IP packet now arrives in the last point of attachment.  Like the H/C, the anchor point n-point unicasts to the paging area.  The BS in the paging areas all page the mobile, and the mobile responds to one of the base stations.  If the mobile responds on a different BS than the anchor, the BS relocates state associated with the mobile from BS to BS before initial call or IP packet delivery completes. [[Bosch](https://ieeexplore.ieee.org/document/4224951/) 3866].
[Hybrid ARQ](https://en.wikipedia.org/wiki/Hybrid_automatic_repeat_request) (H-ARQ) drives a flat architecture, since it obviates the need for spatial diversity.  Spatial diversity drives a H/C.  We can have four mobility management approaches, either H/C or Flat, and with H-ARQ or without H-ARQ.  I put together a quad chart, derived from the text of [[Bosch](https://ieeexplore.ieee.org/document/4224951/) 3865], that summarizes the different approaches.

![H-ARQ approaches]({filename}/images/Lte_And_Beyond_The_Evolution_To_A_Flat_Ip_Architecture/04_h_arq_approaches.png)
 
To avoid anchor points, or any notion of H/C in MM, we use distributed mobility management or DMM.  I’ve summarized the text of [[Bokor](https://link.springer.com/chapter/10.1007/978-3-642-20898-0_3) 44] below.

![DMM Alternatives]({filename}/images/Lte_And_Beyond_The_Evolution_To_A_Flat_Ip_Architecture/05_dmm_alternatives.png) 
 
Bokor further disects DMM into two approaches, partial or full.  I’ve summarized the text below:
 
![DMM Partial vs. Full]({filename}/images/Lte_And_Beyond_The_Evolution_To_A_Flat_Ip_Architecture/06_dmm_partial_vs_full.png)
 
Ali discusses two IP based MM approaches in which the UE preserves his IP address, aka home address.  In network based MM, the NW (access GW) detects if the UE changed his point of attachment.  If so, the NW provides the UE with the same IP address, updates the mobility anchor in the NW and the packets arrive at the new UE point of attachment.  The UE functions independent of MM signaling.  In client-based MM, the UE obtains a new local IP address upon move, which we call the care-of-address.  The UE updates the home agent and the home agent maintains binding between care-of-address and home address of UE. [[Ali](https://ieeexplore.ieee.org/document/4785381/) 59].  3GPP uses [PMIPv6](https://tools.ietf.org/html/rfc5213) for IP MM between 3GPP & non3GPP (and also optional for intra3GPP).  PMIPv6 provides handover capability within and between access systems with no perceivable service interruption.  PMIPv6 minimizes delay from MM procedure with efficient use of resources.  Wireless resources could be a potential bottleneck, so PMIPv6 minimizes UE involvement in MM (improve the battery life).  PMIPv6 introduces the Local Mobility Anchor (LMA), the equivalent of a home agent that provides the topological anchor point for the home network prefix and manages the binding state of the mobile node.  The PMIPv6 Mobile Access Gateway (MAG), acts as the proxy (foreign) agent for the terminal and handles the mobility signaling (e.g., a proxy binding update) toward the LMA upon terminal movement. [[Ali](https://ieeexplore.ieee.org/document/4785381/) 59].  In summary PMIPv6 for 3GPP EPC Release 8 provides inter-access system mobility, enables a common packet core for various access technologies, provisions QoS and executes seamless handovers.  PMIPv6 achieves non-optimized handovers between 3GPP accesses and other non-3GPP accesses and optimized handovers between E-UTRAN and [eHRPD](https://tools.ietf.org/html/rfc6312).  PMIPv6 supports UE multiple-access to EPC, provides MM and controls individual IP flow routes between different radio interfaces. [[Ali](https://ieeexplore.ieee.org/document/4785381/) 64].

# Conclusion
Mobile communication systems move towards a flat IP architecture.  Flat systems reduce complexity and leverage the technology of IP networks.  This paper discussed the reasons behind Hierarchical and Centralized systems, and then followed their evolution to Flat and then Ultra Flat architectures.  In addition, this paper discussed the evolution of the packet switched component of mobile systems.  This paper also addressed scalability concerns and focused on the evolution and types of mobility management schemes.

# Bibliography
 - Ali, Ifran, Alessio Casati, Kuntal Chowdhury, Katsutoshi Nishida, Eric Parsons, Stefan Schmid and Rahul Vaidya.  “[LTE 3GPP RELEASE 8:  Network-Based Mobility Management in the Evolved 3GPP Core Network](https://ieeexplore.ieee.org/document/4785381/).”  IEEE Communications Magazine February 2009: 58-66
 - Bogineni, Kalyani, Reiner Ludwig, Preben Mogensen and Vish Nandlall.  “[LTE Core: Part I](https://ieeexplore.ieee.org/document/4785378/).”  IEEE Communications Magazine February 2009: 40-43
 - Bokor, László, Zoltán Faigl and Sándor Imre.  “[Flat Architectures: Towards Scalable Future Internet Mobility](https://link.springer.com/chapter/10.1007/978-3-642-20898-0_3).”  Future Internet Assembly LNCS 6656 2011: 35–50
 - Bosch, Peter, Louis Samuel, Sape Mullender, Paul Polakos and Gee Rittenhouse.  “[Flat Cellular (UMTS) Networks](https://ieeexplore.ieee.org/document/4224951/).”  IEEE Wireless Communications & Networking Conference (WCNC) 2007: 3864-3869
 - Daoud, Khadija, Philippe Herbelin and Karine Guillouard.  “[Performance and Implementation of UFA: a SIP- based Ultra Flat Mobile Network Architecture](https://ieeexplore.ieee.org/document/5450117/).”  PIMRC 2009: 793-797
 - Sarin, Arun.  “[The Future Of Convergence In The Communications Industry](https://ieeexplore.ieee.org/document/4342843/).”  IEEE Communications Magazine September 2007: 12-14

